"use strict";(self.webpackChunkmy_3_app=self.webpackChunkmy_3_app||[]).push([[870],{2870:function(t,s,e){e.r(s),e.d(s,{default:function(){return F}});var a=e(2791),r=e(364),n="Main_main__+w4kn",u=e(1413),o="Newpost_post__CPNWt",i="Newpost_input__Qu0wR",c=e(7276),l=e(3896),d=e(184);function _(t){var s=(0,l.cI)(),e=s.register,a=s.handleSubmit,r=s.reset;return(0,d.jsxs)("form",{onSubmit:a((function(s){t.addPost(s.post),r()})),className:o,children:[(0,d.jsx)("textarea",(0,u.Z)((0,u.Z)({},e("post",{required:!0})),{},{placeholder:"\u0427\u0442\u043e \u0443 \u0432\u0430\u0441 \u043d\u043e\u0432\u043e\u0433\u043e?",className:i})),(0,d.jsx)(c.Z,{text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})]})}var p=(0,a.memo)(_),f={posts:"Posts_posts__5q8k2",head:"Posts_head__viDiz",ava:"Posts_ava__rN4Kf",title:"Posts_title__EjwSk",date:"Posts_date__yT7uL",icon:"Posts_icon__I9C6Z"},x=e(294),m=e(4483),j=e(3174),h=function(t){var s=new Date(t.post.date);return(0,d.jsxs)("div",{className:f.posts,children:[(0,d.jsxs)("div",{className:f.head,children:[(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:f.title,children:[(0,d.jsx)("img",{className:f.ava,src:t.post.ava,alt:"ava"}),(0,d.jsx)("h3",{children:t.post.profileName})]})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:f.date,children:[s.toLocaleTimeString().slice(0,5)," ",s.toLocaleDateString()]}),(0,d.jsx)(m.G,{onClick:function(){return t.deletePost(t.post.date)},icon:j.$aW,className:f.icon})]})]}),(0,d.jsx)(x.Z,{}),(0,d.jsx)("div",{className:f.body,children:t.post.body})]})},g=(0,a.memo)(h),v=e(885),S="Status_status__Z4HTg",N="Status_edit__F16Vj",P="Status_text__KnLC9",Z="Status_error__nptRS",C="Status_delete__WTiuE",k=function(t){var s=(0,a.useState)(!1),e=(0,v.Z)(s,2),r=e[0],n=e[1],u=(0,a.useState)(t.status),o=(0,v.Z)(u,2),i=o[0],c=o[1],l=(0,a.useRef)(null),_=(0,a.useState)(null),p=(0,v.Z)(_,2),f=p[0],x=p[1];return(0,a.useEffect)((function(){x({left:"".concat(l.current.getBoundingClientRect().left,"px"),top:"".concat(l.current.getBoundingClientRect().bottom+5,"px")}),c(t.status)}),[t.status]),(0,d.jsxs)("div",{ref:l,className:S,children:[r?(0,d.jsx)("input",{className:N,autoFocus:!0,type:"text",onBlur:function(s){n(!1),t.putStatus(s.currentTarget.value)},value:i,onChange:function(t){return c(t.currentTarget.value)}}):(0,d.jsx)("div",{className:P,onDoubleClick:function(){n(!0)},children:t.status||"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0432\u0430\u0448 \u0441\u0442\u0430\u0442\u0443\u0441"}),!r&&t.errorMessage&&(0,d.jsxs)("div",{style:f,className:Z,children:[t.errorMessage,(0,d.jsx)(m.G,{onClick:function(){return t.setError(null)},icon:j.g82,className:C})]})]})},E=(0,a.memo)(k),M=function(t){return(0,d.jsxs)("div",{className:n,children:[(0,d.jsx)(E,{status:t.status,putStatus:t.putStatus,errorMessage:t.errorMessage,setError:t.setError}),(0,d.jsx)(x.Z,{}),(0,d.jsx)(p,{addPost:t.addPost}),t.state.posts.map((function(s){return(0,d.jsx)(g,{post:s,deletePost:t.deletePost},s.date)}))]})},b=e(8156),w=e(2291),y=e(7781),R=e(6508),T=e(8465),F=(0,y.qC)(w.Z,(0,r.$j)((function(t){return{state:t.data.main,status:t.profile.status,id:t.auth.id,statusIsFetching:t.profile.statusIsFetching,errorMessage:t.profile.errorMessage}}),{addPost:b.q2,deletePost:b.fR,getStatus:R.lR,putStatus:R.WN,setError:R.sT}))((function(t){return(0,a.useEffect)((function(){t.getStatus(t.id)}),[]),t.statusIsFetching?(0,d.jsx)(T.Z,{}):(0,d.jsx)(M,{status:t.status,state:t.state,putStatus:t.putStatus,addPost:t.addPost,deletePost:t.deletePost,errorMessage:t.errorMessage,setError:t.setError})}))},2291:function(t,s,e){e(2791);var a=e(364),r=e(6871),n=e(184);s.Z=function(t){return(0,a.$j)((function(t){return{isAuth:t.auth.isAuthenticated}}))((function(s){return s.isAuth?(0,n.jsx)(t,{}):(0,n.jsx)(r.Fg,{to:"/login"})}))}}}]);
//# sourceMappingURL=870.f4840487.chunk.js.map